(()=>{"use strict";let e=[];const t=document.getElementById("show-project-form"),n=document.getElementById("add-project-form"),d=document.getElementById("add-project"),i=document.getElementById("project-title"),a=document.getElementById("project-description"),o=document.getElementById("project-due-date"),c=document.getElementById("projects-container"),r=document.getElementById("add-task-form"),l=document.getElementById("add-task"),s=document.getElementById("task-title"),u=document.getElementById("task-description"),m=document.getElementById("task-due-date"),p=document.getElementById("task-priority"),v=document.getElementById("task-notes"),E=document.getElementById("edit-project-form"),k=document.getElementById("edit-project"),y=document.getElementById("edit-project-title"),f=document.getElementById("edit-project-description"),g=document.getElementById("edit-project-due-date"),x=document.getElementById("edit-task-form"),I=document.getElementById("edit-task"),B=document.getElementById("edit-task-title"),b=document.getElementById("edit-task-description"),h=document.getElementById("edit-task-due-date"),j=document.getElementById("edit-task-priority"),L=document.getElementById("edit-task-notes");function T(){localStorage.setItem("projectsArray",JSON.stringify(e))}function D(){c.innerHTML="",e.forEach((t=>{if(null!=t){let d=document.createElement("div"),i=document.createElement("p"),a=document.createElement("button");i.innerHTML="Project: "+t.title+"<br>Description: "+t.description+"<br>Due Date: "+t.dueDate,a.innerText="Delete Project",a.setAttribute("data-index",e.indexOf(t)),a.addEventListener("click",(function(){delete e[a.dataset.index],T(),c.removeChild(d)}));let o=document.createElement("button");o.innerHTML="Edit Project",o.addEventListener("click",(function(){E.hidden=!1,k.setAttribute("data-index",e.indexOf(t)),y.value=t.title,f.value=t.description,g.value=t.dueDate}));let s=document.createElement("button");s.innerHTML="Create Task",s.addEventListener("click",(function(){r.hidden=!1,l.setAttribute("data-index",e.indexOf(t))}));let u=document.createElement("div");u.setAttribute("hidden",!0);let m=document.createElement("button");function n(){t.tasks.every((e=>null===e))&&m.setAttribute("hidden",!0)}m.addEventListener("click",(function(){u.hidden?(u.hidden=!1,m.innerHTML="Hide Tasks"):(u.hidden=!0,m.innerHTML="Show Tasks")})),m.innerHTML="Show Tasks",n(),t.tasks.forEach((d=>{if(null!=d){let i=document.createElement("p"),a=document.createElement("button");a.innerHTML="Delete Task";let o=document.createElement("button");o.innerHTML="Edit Task",i.innerHTML+="<br><br>Task: "+d.title+"<br>Description: "+d.description+"<br>Due Date: "+d.dueDate+"<br>Priority: "+d.priority+"<br>Notes: "+d.notes+"<br><br>",a.setAttribute("data-index",t.tasks.indexOf(d)),a.addEventListener("click",(function(){delete t.tasks[a.dataset.index],n(),T(),u.removeChild(i)})),o.addEventListener("click",(function(){x.hidden=!1,I.setAttribute("data-projectindex",e.indexOf(t)),I.setAttribute("data-taskindex",t.tasks.indexOf(d)),B.value=d.title,b.value=d.description,h.value=d.dueDate,j.value=d.priority,L.value=d.notes})),u.append(i,o,a)}})),d.append(i,u,m,s,o,a),c.appendChild(d)}}))}t.addEventListener("click",(function(){n.hidden=!1})),d.addEventListener("click",(function(){if(""!=i.value&&""!=a.value&&""!=o.value){let r=(t=i.value,d=a.value,c=o.value,{title:t,description:d,dueDate:c,tasks:[]});e.push(r),T(),n.hidden=!0,D()}var t,d,c})),l.addEventListener("click",(function(){if(""!=s.value&&""!=u.value&&""!=m.value&&""!=p.value&&""!=v.value){let o=(t=s.value,n=u.value,d=m.value,i=p.value,a=v.value,{title:t,description:n,dueDate:d,priority:i,notes:a});e[l.dataset.index].tasks.push(o),T(),r.hidden=!0,D()}var t,n,d,i,a})),k.addEventListener("click",(function(){e[k.dataset.index].title=y.value,e[k.dataset.index].description=f.value,e[k.dataset.index].dueDate=g.value,T(),E.hidden=!0,D()})),I.addEventListener("click",(function(){e[I.dataset.projectindex].tasks[I.dataset.taskindex].title=B.value,e[I.dataset.projectindex].tasks[I.dataset.taskindex].description=b.value,e[I.dataset.projectindex].tasks[I.dataset.taskindex].dueDate=h.value,e[I.dataset.projectindex].tasks[I.dataset.taskindex].priority=j.value,e[I.dataset.projectindex].tasks[I.dataset.taskindex].notes=L.value,T(),x.hidden=!0,D()})),e=JSON.parse(localStorage.getItem("projectsArray")),(null===e||e.every((e=>null===e)))&&(e=[]),D(),console.log(e)})();