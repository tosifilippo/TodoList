(()=>{"use strict";let e=[];const t=document.getElementById("show-project-form"),n=document.getElementById("add-project-form"),d=document.getElementById("add-project"),i=document.getElementById("project-title"),a=document.getElementById("project-description"),c=document.getElementById("project-due-date"),l=document.getElementById("projects-container"),o=document.getElementById("add-task-form"),r=document.getElementById("add-task"),s=document.getElementById("task-title"),u=document.getElementById("task-description"),m=document.getElementById("task-due-date"),v=document.getElementById("task-priority"),E=document.getElementById("task-notes"),k=document.getElementById("edit-project-form"),p=document.getElementById("edit-project"),y=document.getElementById("edit-project-title"),f=document.getElementById("edit-project-description"),x=document.getElementById("edit-project-due-date"),h=document.getElementById("edit-task-form"),g=document.getElementById("edit-task"),b=document.getElementById("edit-task-title"),I=document.getElementById("edit-task-description"),B=document.getElementById("edit-task-due-date"),L=document.getElementById("edit-task-priority"),j=document.getElementById("edit-task-notes"),T=document.getElementById("x-project-form"),A=document.getElementById("x-edit-project"),D=document.getElementById("x-task-form"),H=document.getElementById("x-edit-task"),M=document.getElementById("sidebar-container");function O(){localStorage.setItem("projectsArray",JSON.stringify(e))}function S(){l.innerHTML="",M.innerHTML="",e.forEach((t=>{if(null!=t){let i=document.createElement("button");i.innerHTML=t.title,i.classList.add("sidebar-button"),i.addEventListener("click",(function(){a.hidden?a.hidden=!1:a.hidden=!0}));let a=document.createElement("div");a.setAttribute("hidden",!0),a.setAttribute("data-index",e.indexOf(t)),a.setAttribute("class","project-display"),p.addEventListener("click",(function(){e[p.dataset.index].title=y.value,e[p.dataset.index].description=f.value,e[p.dataset.index].dueDate=x.value,O(),k.hidden=!0,i.innerHTML=t.title,n()}));let c=document.createElement("p"),s=document.createElement("button");function n(){c.innerHTML="<br>Project: "+t.title+"<br>Description: "+t.description+"<br>Due Date: "+t.dueDate}n(),s.innerText="Delete Project",s.setAttribute("data-index",e.indexOf(t)),s.addEventListener("click",(function(){delete e[s.dataset.index],O(),l.removeChild(a),M.removeChild(i)}));let u=document.createElement("button");u.innerHTML="Edit Project",u.addEventListener("click",(function(){k.hidden=!1,p.setAttribute("data-index",e.indexOf(t)),y.value=t.title,f.value=t.description,x.value=t.dueDate}));let m=document.createElement("button");m.innerHTML="Add Task",m.addEventListener("click",(function(){o.hidden=!1,r.setAttribute("data-index",e.indexOf(t))}));let v=document.createElement("div");v.setAttribute("hidden",!0);let E=document.createElement("button");function d(){t.tasks.every((e=>null===e))&&E.setAttribute("hidden",!0)}E.classList.add("show-task-button"),E.setAttribute("data-index",e.indexOf(t)),E.addEventListener("click",(function(){v.hidden?(v.hidden=!1,E.innerHTML="Hide Tasks"):(v.hidden=!0,E.innerHTML="Show Tasks")})),E.innerHTML="Show Tasks",d(),t.tasks.forEach((n=>{if(null!=n){g.addEventListener("click",(function(){e[g.dataset.projectindex].tasks[g.dataset.taskindex].title=b.value,e[g.dataset.projectindex].tasks[g.dataset.taskindex].description=I.value,e[g.dataset.projectindex].tasks[g.dataset.taskindex].dueDate=B.value,e[g.dataset.projectindex].tasks[g.dataset.taskindex].priority=L.value,e[g.dataset.projectindex].tasks[g.dataset.taskindex].notes=j.value,O(),h.hidden=!0,i()}));let a=document.createElement("p"),c=document.createElement("button");c.innerHTML="Delete Task";let l=document.createElement("button");function i(){a.innerHTML="<br>Task: "+n.title+"<br>Description: "+n.description+"<br>Due Date: "+n.dueDate+"<br>Priority: "+n.priority+"<br>Notes: "+n.notes+"<br>",a.append(l,c),v.append(a)}l.innerHTML="Edit Task",i(),c.setAttribute("data-index",t.tasks.indexOf(n)),c.addEventListener("click",(function(){delete t.tasks[c.dataset.index],d(),O(),v.removeChild(a)})),l.addEventListener("click",(function(){h.hidden=!1,g.setAttribute("data-projectindex",e.indexOf(t)),g.setAttribute("data-taskindex",t.tasks.indexOf(n)),b.value=n.title,I.value=n.description,B.value=n.dueDate,L.value=n.priority,j.value=n.notes}))}})),a.append(c,v,E,m,u,s),l.appendChild(a),M.appendChild(i)}}))}t.addEventListener("click",(function(){n.hidden=!1})),d.addEventListener("click",(function(){if(""!=i.value&&""!=a.value&&""!=c.value){let o=(t=i.value,d=a.value,l=c.value,{title:t,description:d,dueDate:l,tasks:[]});e.push(o),O(),n.hidden=!0,S();let r=document.querySelectorAll(`[data-index="${e.length-1}"]`);console.log(r),r.forEach((e=>{e.hidden=!1}))}var t,d,l})),r.addEventListener("click",(function(){if(""!=s.value&&""!=u.value&&""!=m.value&&""!=v.value&&""!=E.value){let c=(t=s.value,n=u.value,d=m.value,i=v.value,a=E.value,{title:t,description:n,dueDate:d,priority:i,notes:a});e[r.dataset.index].tasks.push(c),O(),o.hidden=!0,S(),document.querySelectorAll(`[data-index="${r.dataset.index}"]`).forEach((e=>{e.hidden=!1})),document.querySelectorAll(".show-task-button").forEach((e=>{e.dataset.index===r.dataset.index&&e.click()}))}var t,n,d,i,a})),T.addEventListener("click",(function(){n.hidden=!0,i.value="",a.value="",c.value=""})),A.addEventListener("click",(function(){k.hidden=!0})),D.addEventListener("click",(function(){o.hidden=!0,u.value="",m.value="",E.value="",v.value="",s.value=""})),H.addEventListener("click",(function(){h.hidden=!0})),e=JSON.parse(localStorage.getItem("projectsArray")),(null===e||e.every((e=>null===e)))&&(e=[]),S(),console.log(e)})();